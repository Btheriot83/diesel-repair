---
// Simplified 2-step contact form for better mobile conversion
// Step 1: Name + Phone + Problem (high conversion)
// Step 2: Optional details if they won't call (lower priority)
---

<section id="contact" class="py-20 bg-background">
  <div class="container mx-auto px-4">
    <div class="text-center mb-16">
      <h2 class="text-4xl md:text-5xl font-bold text-foreground mb-6">
        Get Emergency Help Fast
      </h2>
      <p class="text-xl text-muted-foreground max-w-3xl mx-auto mb-4">
        Tell us your name, number, and what's wrong. We'll call back within 15 minutes.
      </p>
      <div class="flex items-center justify-center gap-2 text-sm text-muted-foreground">
        <div class="bg-green-100 text-green-800 px-3 py-1 rounded-full font-semibold">
          ✓ 99% same-day response
        </div>
        <div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-semibold">
          ✓ We come to you
        </div>
      </div>
    </div>

    <div class="max-w-lg mx-auto">
      <!-- Step 1: Essential Info Only (High Conversion) -->
      <form id="contact-form-simple" class="space-y-6 bg-white rounded-lg shadow-lg p-6 border">
        <div class="text-center mb-6">
          <div class="inline-flex items-center gap-2 bg-orange-50 text-orange-800 px-4 py-2 rounded-full text-sm font-semibold">
            <div class="w-2 h-2 bg-orange-500 rounded-full animate-pulse"></div>
            Quick Contact - Less than 15 minutes
          </div>
        </div>

        <!-- Emergency Toggle at Top -->
        <div class="flex items-center justify-center space-x-3 p-3 bg-red-50 rounded-lg border border-red-200">
          <input
            type="checkbox"
            id="emergency-simple"
            class="w-4 h-4 rounded border-red-300 text-red-600 focus:ring-red-500"
          />
          <label for="emergency-simple" class="text-red-800 font-bold text-lg">
            🚨 EMERGENCY / Down at Roadside
          </label>
        </div>

        <!-- Name -->
        <div>
          <label for="name-simple" class="text-foreground font-semibold block mb-2">Your Name *</label>
          <input
            id="name-simple"
            name="name"
            type="text"
            required
            placeholder="John Smith"
            class="w-full h-12 px-4 border-2 border-border bg-background rounded-lg text-base ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus:border-orange-500"
          />
        </div>

        <!-- Phone -->
        <div>
          <label for="phone-simple" class="text-foreground font-semibold block mb-2">Phone Number *</label>
          <input
            id="phone-simple"
            name="phone"
            type="tel"
            required
            placeholder="(480) 555-0123"
            class="w-full h-12 px-4 border-2 border-border bg-background rounded-lg text-base ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus:border-orange-500"
          />
        </div>

        <!-- Problem Description -->
        <div>
          <label for="problem-simple" class="text-foreground font-semibold block mb-2">What's Wrong? *</label>
          <textarea
            id="problem-simple"
            name="problem"
            required
            placeholder="Engine won't start, check engine light, overheating, brake issues, etc."
            rows="3"
            class="w-full px-4 py-3 border-2 border-border bg-background rounded-lg text-base ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 resize-none focus:border-orange-500"
          ></textarea>
          <p class="text-sm text-muted-foreground mt-1">
            Brief description is fine - we'll get details when we call back
          </p>
        </div>

        <!-- Location (Essential for dispatch) -->
        <div>
          <label for="location-simple" class="text-foreground font-semibold block mb-2">Location *</label>
          <input
            id="location-simple"
            name="location"
            type="text"
            required
            placeholder="Zip code or cross-streets"
            class="w-full h-12 px-4 border-2 border-border bg-background rounded-lg text-base ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus:border-orange-500"
          />
          <p class="text-xs text-muted-foreground mt-1">
            For accurate dispatch and ETA
          </p>
        </div>

        <!-- Primary Submit Button -->
        <button
          type="submit"
          class="w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-bold py-4 px-6 rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 text-lg min-h-[44px]"
          id="submit-simple"
        >
          Request Emergency Service
        </button>

        <!-- Alternative: Show Step 2 -->
        <div class="text-center pt-4 border-t">
          <button
            type="button"
            id="show-details-btn"
            class="text-muted-foreground underline hover:text-foreground transition-colors text-sm"
          >
            Add more details about vehicle, service type, timeline →
          </button>
        </div>
      </form>

      <!-- Step 2: Additional Details (Hidden by default) -->
      <div id="additional-details" class="hidden mt-6 bg-gray-50 rounded-lg p-6 border">
        <h3 class="font-semibold text-foreground mb-4">Optional Additional Details</h3>

        <div class="space-y-4">
          <div>
            <label for="service-type" class="text-sm font-medium text-foreground block mb-1">Service Type</label>
            <select id="service-type" name="serviceType" class="w-full h-10 px-3 border border-border bg-background rounded-md text-sm">
              <option value="">Select if known</option>
              <option value="Emergency Roadside">Emergency Roadside</option>
              <option value="Engine Issues">Engine Issues</option>
              <option value="Electrical">Electrical</option>
              <option value="Brakes">Brakes</option>
              <option value="A/C Issues">A/C Issues</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div>
            <label for="vehicle-info" class="text-sm font-medium text-foreground block mb-1">Vehicle Type</label>
            <input
              id="vehicle-info"
              name="vehicleInfo"
              type="text"
              placeholder="Semi, box truck, delivery truck, etc."
              class="w-full h-10 px-3 border border-border bg-background rounded-md text-sm"
            />
          </div>

          <div>
            <label for="timeline" class="text-sm font-medium text-foreground block mb-1">When needed?</label>
            <select id="timeline" name="timeline" class="w-full h-10 px-3 border border-border bg-background rounded-md text-sm">
              <option value="">Select timeline</option>
              <option value="ASAP">ASAP / Emergency</option>
              <option value="Within 2 hours">Within 2 hours</option>
              <option value="Same day">Same day</option>
              <option value="Schedule later">Schedule for later</option>
            </select>
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

<script>
  // Show/hide additional details
  document.getElementById('show-details-btn')?.addEventListener('click', function() {
    const details = document.getElementById('additional-details');
    const btn = this;

    if (details?.classList.contains('hidden')) {
      details.classList.remove('hidden');
      btn.textContent = '← Hide additional details';
    } else {
      details?.classList.add('hidden');
      btn.textContent = 'Add more details about vehicle, service type, timeline →';
    }
  });

  // Form submission handler
  document.getElementById('contact-form-simple')?.addEventListener('submit', function(e) {
    e.preventDefault();

    const submitBtn = document.getElementById('submit-simple');
    if (submitBtn) {
      submitBtn.textContent = 'Sending...';
      submitBtn.disabled = true;

      // Simulate form submission
      setTimeout(() => {
        submitBtn.innerHTML = '✓ Request Sent! We\'ll call within 15 minutes';
        submitBtn.classList.add('bg-green-600');
      }, 1000);
    }
  });
</script>

<style>
  /* Form styling matching design system */
  .bg-background {
    background-color: hsl(var(--background));
  }

  .text-foreground {
    color: hsl(var(--foreground));
  }

  .text-muted-foreground {
    color: hsl(var(--muted-foreground));
  }

  .border-border {
    border-color: hsl(var(--border));
  }

  .ring-ring {
    --tw-ring-color: hsl(var(--ring));
  }

  /* Enhanced focus states for better UX */
  input:focus, textarea:focus, select:focus {
    transform: scale(1.01);
    transition: all 0.2s ease;
  }

  /* Smooth transitions */
  button {
    transition: all 0.2s ease;
  }
</style>